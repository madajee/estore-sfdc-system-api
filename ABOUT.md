

PR Summary:
Test passed: 1/1

Scenario 1: Test passed


Overall application coverage: 2.75%

Resource File: account-obj.xml - Coverage: 0.00%

Components within the file:

| Name                                                                 | Type     | Covered (P) | Total (P) | Coverage |
|-----------------------------------------------------------------------|----------|-------------|-----------|----------|
| post:\account\contract:estore-sfdc-system-api-config                 | Flow     | 0           | 2         | 0.00%    |
| put:\account\(Id):estore-sfdc-system-api-config                      | Flow     | 0           | 2         | 0.00%    |
| update-account-by-idSubFlow                                          | Sub flow | 0           | 5         | 0.00%    |
| create-accountcontractSubFlow                                        | Sub flow | 0           | 5         | 0.00%    |
| get:\account\contract:estore-sfdc-system-api-config                  | Flow     | 0           | 2         | 0.00%    |
| get:\account:estore-sfdc-system-api-config                           | Flow     | 0           | 2         | 0.00%    |
| get-accountSubFlow                                                   | Sub flow | 0           | 2         | 0.00%    |
| get-accountcontractSubFlow                                           | Sub flow | 0           | 4         | 0.00%    |
| deletecontractsSubFlow                                               | Sub flow | 0           | 3         | 0.00%    |
| post:\deletecontracts:application\json:estore-sfdc-system-api-config | Flow     | 0           | 1         | 0.00%    |

Resource File: lead-obj.xml - Coverage: 23.08%

Components within the file:

| Name                        | Type     | Covered (P) | Total (P) | Coverage |
|-----------------------------|----------|-------------|-----------|----------|
| deleteleadsSubFlow          | Sub flow | 0           | 3         | 0.00%    |
| convert-leadSubFlow         | Sub flow | 6           | 7         | 85.71%   |
| get-leadSubFlow             | Sub flow | 0           | 3         | 0.00%    |
| lead-staticquerySubFlow     | Sub flow | 0           | 5         | 0.00%    |
| get-lead-by-idSubFlow       | Sub flow | 0           | 2         | 0.00%    |
| create-leadSubFlow          | Sub flow | 0           | 3         | 0.00%    |
| deleteaccountcontactSubFlow | Sub flow | 0           | 3         | 0.00%    |

Resource File: order-obj.xml - Coverage: 0.00%

Components within the file:

| Name                                                              | Type     | Covered (P) | Total (P) | Coverage |
|--------------------------------------------------------------------|----------|-------------|-----------|----------|
| post:\deleteorders:application\json:estore-sfdc-system-api-config | Flow     | 0           | 1         | 0.00%    |
| create-contractorderSubFlow                                       | Sub flow | 0           | 6         | 0.00%    |
| get-contractorderSubFlow                                          | Sub flow | 0           | 2         | 0.00%    |
| post:\order\product:estore-sfdc-system-api-config                 | Flow     | 0           | 2         | 0.00%    |
| post:\order:estore-sfdc-system-api-config                         | Flow     | 0           | 2         | 0.00%    |
| remove-orderproductSubFlow                                        | Sub flow | 0           | 8         | 0.00%    |
| post:\order\removeproduct:estore-sfdc-system-api-config           | Flow     | 0           | 2         | 0.00%    |
| deleteordersSubFlow                                               | Sub flow | 0           | 3         | 0.00%    |
| get:\order:estore-sfdc-system-api-config                          | Flow     | 0           | 2         | 0.00%    |
| create-orderproductSubFlow                                        | Sub flow | 0           | 9         | 0.00%    |

Resource File: estore-sfdc-system-api.xml - Coverage: 0.00%

Components within the file:

| Name                                                                      | Type | Covered (P) | Total (P) | Coverage |
|----------------------------------------------------------------------------|------|-------------|-----------|----------|
| get:\lead\(Id):estore-sfdc-system-api-config                              | Flow | 0           | 2         | 0.00%    |
| post:\deleteaccountcontact:application\json:estore-sfdc-system-api-config | Flow | 0           | 1         | 0.00%    |
| post:\convertlead:application\json:estore-sfdc-system-api-config          | Flow | 0           | 1         | 0.00%    |
| post:\lead:application\json:estore-sfdc-system-api-config                 | Flow | 0           | 1         | 0.00%    |
| post:\deleteleads:application\json:estore-sfdc-system-api-config          | Flow | 0           | 1         | 0.00%    |
| estore-sfdc-system-api-main                                               | Flow | 0           | 7         | 0.00%    |
| get:\leadstaticquery:estore-sfdc-system-api-config                        | Flow | 0           | 1         | 0.00%    |
| get:\ping:estore-sfdc-system-api-config                                   | Flow | 0           | 1         | 0.00%    |
| get:\lead:estore-sfdc-system-api-config                                   | Flow | 0           | 2         | 0.00%    |

Resource File: opportunity-obj.xml - Coverage: 0.00%

Components within the file:

| Name                                                              | Type     | Covered (P) | Total (P) | Coverage |
|--------------------------------------------------------------------|----------|-------------|-----------|----------|
| create-opportunityproductSubFlow                                  | Sub flow | 0           | 9         | 0.00%    |
| post:\deletequotes:application\json:estore-sfdc-system-api-config | Flow     | 0           | 1         | 0.00%    |
| put:\opportunity\quote\(Id):estore-sfdc-system-api-config         | Flow     | 0           | 2         | 0.00%    |
| get:\opportunity:estore-sfdc-system-api-config                    | Flow     | 0           | 2         | 0.00%    |
| update-opportunity-by-idSubFlow                                   | Sub flow | 0           | 6         | 0.00%    |
| post:\opportunity\product:estore-sfdc-system-api-config           | Flow     | 0           | 2         | 0.00%    |
| deletequotesSubFlow                                               | Sub flow | 0           | 3         | 0.00%    |
| get-opportunitySubFlow                                            | Sub flow | 0           | 2         | 0.00%    |
| post:\opportunity\quote:estore-sfdc-system-api-config             | Flow     | 0           | 2         | 0.00%    |
| put:\opportunity\(Id):estore-sfdc-system-api-config               | Flow     | 0           | 2         | 0.00%    |
| update-quote-by-idSubFlow                                         | Sub flow | 0           | 7         | 0.00%    |
| get-opportunityquoteSubFlow                                       | Sub flow | 0           | 8         | 0.00%    |
| create-opportunityquoteSubFlow                                    | Sub flow | 0           | 12        | 0.00%    |
| get:\opportunity\quote:estore-sfdc-system-api-config              | Flow     | 0           | 2         | 0.00%    |
| post:\opportunity\removeproduct:estore-sfdc-system-api-config     | Flow     | 0           | 2         | 0.00%    |
| remove-opportunityproductSubFlow                                  | Sub flow | 0           | 7         | 0.00%    |

Resource File: product-obj-api.xml - Coverage: 0.00%

Components within the file:

| Name                                                                           | Type     | Covered (P) | Total (P) | Coverage |
|---------------------------------------------------------------------------------|----------|-------------|-----------|----------|
| get:\product\(Id):estore-sfdc-system-api-config                                | Flow     | 0           | 2         | 0.00%    |
| create-pricebookentrySubFlow                                                   | Sub flow | 0           | 5         | 0.00%    |
| get-product-by-idSubFlow                                                       | Sub flow | 0           | 2         | 0.00%    |
| get-products-by-productcodelistSubFlow                                         | Sub flow | 0           | 3         | 0.00%    |
| create-productSubFlow                                                          | Sub flow | 0           | 3         | 0.00%    |
| get-price-by-productcode-currencySubFlow                                       | Sub flow | 0           | 2         | 0.00%    |
| get-pricebookentryCurencySubFlow                                               | Sub flow | 0           | 4         | 0.00%    |
| post:\product:application\json:estore-sfdc-system-api-config                   | Flow     | 0           | 2         | 0.00%    |
| post:\deletepricebookentry:application\json:estore-sfdc-system-api-config      | Flow     | 0           | 1         | 0.00%    |
| post:\deleteproducts:application\json:estore-sfdc-system-api-config            | Flow     | 0           | 1         | 0.00%    |
| get:\pricebookentrycurrency:estore-sfdc-system-api-config                      | Flow     | 0           | 2         | 0.00%    |
| deleteproductsSubFlow                                                          | Sub flow | 0           | 3         | 0.00%    |
| post:\productsbyproductcodelist:application\json:estore-sfdc-system-api-config | Flow     | 0           | 1         | 0.00%    |
| get:\pricebookentry:estore-sfdc-system-api-config                              | Flow     | 0           | 2         | 0.00%    |
| get-pricebookentrySubFlow                                                      | Sub flow | 0           | 3         | 0.00%    |
| post:\pricebookentry:application\json:estore-sfdc-system-api-config            | Flow     | 0           | 2         | 0.00%    |
| deletepricebookentrySubFlow                                                    | Sub flow | 0           | 3         | 0.00%    |



---


### Test Scenario-1


#### Description

Test convert-leadSubFlow for successful lead conversion with account name provided - covers the main conversion flow including lead query, account query when account name is provided, lead conversion, and response transformation.


#### Behavior

• Mock the Salesforce connector query operation for "get-lead-by-name" to return lead data with Id
• Mock the Salesforce connector query operation for "get-account-by-name" to return account data with Id
• Mock the Salesforce connector convert-lead operation to return successful conversion response
• Set the input payload with lead conversion request containing name, accountname, opportunityname, and doNotCreateOpportunity flag


#### Execution

• Execute the convert-leadSubFlow with the prepared input payload
• Verify all Salesforce connector operations are invoked in the expected sequence


#### Validation

• Verify that the get-lead-by-name Salesforce query operation is called
• Verify that the get-account-by-name Salesforce query operation is called (when accountname is provided)
• Verify that the convert-lead Salesforce operation is called
• Verify the final response payload contains the expected response structure with message and payload
• Verify that the convertleadrequestparams variable is set correctly with the input data
